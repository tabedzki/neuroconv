FROM rclone/rclone:latest
LABEL org.opencontainers.image.source=https://github.com/catalystneuro/neuroconv
LABEL org.opencontainers.image.description="A docker image of Rclone that allows passing credentials and other configuration values as environment variables."
CMD printf "[$DRIVE_NAME]\ntype = drive\nscope = drive\ntoken = {\"access_token\":\"$TOKEN\",\"token_type\":\"Bearer\",\"refresh_token\":\"$REFRESH_TOKEN\",\"expiry\":\"$EXPIRY\"}" > /mnt/data/rclone.conf \
  && cat /mnt/data/rclone.conf \
  && rclone $RCLONE_COMMAND
ENTRYPOINT [""]
